.model small
.386
DSEG SEGMENT
	PORTA EQU 280H
	PORTB EQU 281H
	PORTD EQU 283H
DSEG ENDS

CSEG SEGMENT
ASSUME CS:CSEG,DS:DSEG
START:
	MOV AX, DSEG
	MOV DS, AX

	MOV DX, PORTD
	MOV AL, 90H
	OUT DX, AL

	MOV DX, PORTA
	IN AL, DX
	MOV CL, AL
	MOV BL, AL

LP1:
	MOV DX, PORTA
	IN AL, DX
	MOV BH, AL
	CMP BH, BL
	JZ LIGHT
	MOV BL, BH
	MOV CL, BL

LIGHT:
	MOV AL, CL
	MOV DX, PORTB
	OUT DX, AL

	MOV BX, 0FFFFH
DELAY:
	DEC BX
	JNZ DELAY
	MOV BX, 0FFFFH
DELAY1:
	DEC BX
	JNZ DELAY1
	MOV BX, 0FFFFH
DELAY2:
	DEC BX
	JNZ DELAY2
	MOV BX, 0FFFFH
DELAY3:
	DEC BX
	JNZ DELAY3
	MOV BX, 0FFFFH
DELAY4:
	DEC BX
	JNZ DELAY4
	MOV BX, 0FFFFH
DELAY5:
	DEC BX
	JNZ DELAY5
	MOV BX, 0FFFFH
DELAY6:
	DEC BX
	JNZ DELAY6

	ROR AL, 1
	MOV CL, AL
	JMP LP1

CSEG ENDS
END START
